<html>
<head>
  <title>ESPRGB | Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>
  <style>
    *{margin: 0; padding: 0}
    body {font-family: "Lato", sans-serif; background-color: #151b29}
    #main_wrapper{width: 750px;height: 510px;display: block;margin: 100 auto;background-color: #152036;}
    #wrapper{width: 100%; height: 100%;background-color: #1b2a47;color: white;}
    .tab {float: left;background-color: #1b2a47; width: 15%;height: 100%; text-align: center;color:white; font-size:11px;}
    .tab button {background-color: inherit;color: white;padding: 15px 0px;width: 100%;border: none;text-align: center;font-size: 13px;}
    .tab button.active,button:hover {background-color: #06d79c;}
    .tabcontent {padding: 15px;width: 80%;height: 90%;background-color: #1b2a47;float: left;font-size: 13px;}
    .btn{width: 80px; height: 90px; background-color: #2e2e36; color:white; border: none;font-size:11px; margin:0 8;}
    input[type="range"] {-webkit-appearance: none;overflow: hidden;height: 18px;width: 350px;cursor: pointer;}
    input[type="checkbox"] {cursor: pointer;width: 18px;height: 18px;}
    ::-webkit-slider-runnable-track {background: #ddd;}
    ::-webkit-slider-thumb {-webkit-appearance: none;width: 15px;height: 20px;background: #fff;border: 1px solid gray;box-shadow: -100vw 0 0 100vw #06d79c}
    #btn-ring{position: absolute;width: 26px;height: 26px;border: 7px solid #2a2a2a;top: 6px;left: 6px;border-radius: 31px}
    #ring-line{width: 8px;height: 25px;margin: -10px auto;background: #2a2a2a;border-radius: 6px;border-right: 3px solid #eee;border-left: 3px solid #cdd3c9}
    .active #ring-line{border-right: 3px solid #06d79c;border-left: 3px solid #06d79c;}
    #btn-bg.active{background: #06d79c;}
    #powerConnected{width: 38px;height: 38px;left:21px;top:0px; background-color:white;border-radius: 50%;position: relative;cursor: pointer;}
    #powerConnected.active{background: #06d79c;}
    .title{margin-bottom: 20px;}
    #timeScheduleContainer{width: 470px;height: 400px;background-color: #152036;display: inline-block;margin: 0px 15px 0px 20px;overflow-y: scroll;font-size: 0px;}
    .greenBtn{width:90px;height:45px;background-color: #06d79c;border:none;color: white;vertical-align: bottom;}
    .switch {position: relative;width: 40px;height: 20px;display: inline-block;}
    .switch input {opacity: 0;width: 0;height: 0;}
    .slider {position: absolute;cursor: pointer;top: 0;left: 0;right: 0;bottom: 0;background-color: #ccc;-webkit-transition: .4s;transition: .4s;}
    .slider:before {position: absolute;content: ""; height: 20px;width: 20px;left: 0px;bottom: 0px;background-color: white;-webkit-transition: .4s;transition: .4s;}
    input:checked + .slider { background-color: #06d79c; }
    input:checked + .slider:before {-webkit-transform: translateX(26px);-ms-transform: translateX(26px);transform: translateX(26px);}
    .slider.round { border-radius: 34px; }
    .slider.round:before { border-radius: 50%; }
    .relative { position: relative;cursor: pointer }
    #btn-bg{width: 52px;height: 52px;border-radius: 50%; left:250px;top:-40px; background: #cdd3c9;}
    .hexInput{width: 60px; left:0;top:-70px}
  </style>
  <style data="inputstyle"></style>
  </head>
  <body>
    <div id="main_wrapper">
      <p style="padding:15px 15px; color:#06d79c; font-size:20px;" id="hostname">ESPRGB-Name</p>
      <div id="wrapper">
        <div class="tab">
          <button class="tablinks" onclick="selectTab(event, 'Solid_Color')" id="defaultOpen" ondblclick="myDevice.playAnimation('Solid Color')">Solid Color</button>
          <button class="tablinks" onclick="selectTab(event, 'Color_Cycle')" ondblclick="myDevice.playAnimation('Color Cycle')">Color Cycle</button>
          <button class="tablinks" onclick="selectTab(event, 'Breathing')" ondblclick="myDevice.playAnimation('Breathing')">Breathing</button>
          <button class="tablinks" onclick="selectTab(event, 'Disco')">Disco</button>
          <button class="tablinks" onclick="selectTab(event, 'SolidDisco')" >Solid Disco</button>
          <button class="tablinks" onclick="selectTab(event, 'MorseCode')" ondblclick="myDevice.playAnimation('Morse Code')">Morse Code</button>
          <button class="tablinks" onclick="selectTab(event, 'Ambilight')" >Ambilight</button>
          <button class="tablinks" onclick="selectTab(event, 'Schedule')" >Schedule</button>
          <button class="tablinks" onclick="selectTab(event, 'Other')">Other</button>
          <p style="margin-top:15px">Signal:</p><p id="signalStrenght"></p>
          <p style="margin-top:15px">Playing:</p><p id="playingAnimation" style="width:90px; margin:0 auto;"></p>
        </div>
        <div id="Solid_Color" class="tabcontent">
          <p class="title">Solid Color</p>
          <div style=" width: 300px; margin:20 auto; height: 400px;">
            <div id="solidColor" style="-webkit-box-align:center;-webkit-box-pack:center;display:-webkit-box;"></div>
            <div class="relative" id="btn-bg" onclick="myDevice.SolidColor.powerButtonToggle()"><div id="btn-ring"><div id="ring-line"></div></div></div>
            <input id="SolidColorHex" type="input" value="#ffffff" maxlength="7"  class="relative hexInput"  oninput='myDevice.SolidColor.setHexColor(this.value);'/>
            <div style="height: 80px; position: relative; top:-45px;"> <input  type="range" min="0" max="100" value="100" style="width:300px" id="brightness" oninput='myDevice.SolidColor.setBrightness(this.value/100); setBrightnessColor(this.value/100);'></div>    
          </div>
        </div>
        <div id="Color_Cycle" class="tabcontent">
          <p >Color Cycle</p>
          <div style="margin-top: 20px;text-align:center;font-size:12px">
            <input  type="range" min="1" max="200" value="1" id="ColorCycleSpeed_input" oninput="myDevice.ColorCycle.setSpeed(this.value); document.getElementById('ColorCycleSpeed').innerText = this.value;">
            <input type="checkbox" id="startColorCycle" oninput="myDevice.playAnimation('Color Cycle',this.checked)">
            <p>Speed:<i id="ColorCycleSpeed">1</i></p>
          </div>
        </div>
        <div id="Breathing" class="tabcontent">
          <p class="title">Breathing</p>
          <div style="margin: 20px auto;font-size:12px; width: 400;">
            <div style="margin: 0 auto; width: 380; text-align: center;"> 
              <input type="range" min="1" max="200" value="1" id="breathingSpeed_input" oninput="myDevice.Breathing.setSpeed(this.value); document.getElementById('breathingSpeed').innerText = this.value;">
              <input type="checkbox" id="startBreathing" oninput="myDevice.playAnimation('Breathing',this.checked)">
            </div>
            <div style="height: 25px;width: 378px; margin:4px auto;">
              <input type="checkbox" style="float:right; margin: 0px 4px;" id="useColorList" oninput="myDevice.Breathing.setUseColorList(this.checked);">
              <p style="float:right; margin: 0px 4px;">Use Color List</p>
              <p style="float:right; margin: 0px 4px;">Speed:<i id="breathingSpeed">1</i></p>
            </div>
              <div id="colorListResult" style="height: 25px;width: 370px; margin:4px auto; display: table; table-layout: fixed;"><div style="background-color:#152036; display: table-cell;"></div></div>
              <div style="height: 25px;width: 370px; margin:0 auto; display:inline-block;">
                <button class="btn" style="width:25px; height:25px; float:right; margin:0px 5px; background-color:#3498db;" onclick="myDevice.Breathing.clearList();">C</button>
                <button class="btn" style="width:25px; height:25px; float:right; margin:0px 5px; background-color:#c0392b;" onclick="myDevice.Breathing.removeLastfromList();">-</button>
                <button class="btn" style="width:25px; height:25px; float:right; margin:0px 5px; background-color:#06d79c;" onclick="myDevice.Breathing.addColortoList(staticColorBreathing.color.rgb.r,staticColorBreathing.color.rgb.g,staticColorBreathing.color.rgb.b);">+</button>
              </div>
          
            <div id="staticColorBreathing" style="-webkit-box-align:center;-webkit-box-pack:center;display:-webkit-box; margin:10;"></div>
            <input type="input" value="#ffffff" maxlength="7" id="BreathingHex" class="relative hexInput" style="left: 45; top:-30;"  oninput='myDevice.Breathing.setHexColor(this.value);'>
          </div>  
        </div>
        <div id="Disco" class="tabcontent">
          <p class="title">Disco</p>
          <p>Disco is not avalible on web version get the windows client</p>
        </div>
        <div id="SolidDisco" class="tabcontent">
          <p class="title">Solid Disco</p>
          <p>Solid Disco is not avalible on web version get the windows client</p>
        </div>
        <div id="MorseCode" class="tabcontent">
          <p class="title">Morse Code</p>
          <div style="display:inline-block;">
            <p style="margin:10px 0px 5px 0px;">Plain message:</p>
            <textarea id="morsePlainText" style="resize:none; background-color: #152036; color:white; border: 1px solid #5e5e5e;text-transform: lowercase; font-size:10pt;" rows="5" cols="50" maxlength="75" oninput="document.getElementById('encodedMsgResult').value = myDevice.MorseCode.setText(this.value); "></textarea>
            <p style="margin:10px 0px 5px 0px;">Encoded message:</p>
            <textarea id="encodedMsgResult" style="resize:none; background-color: #152036; color:white; border: 1px solid #5e5e5e; font-size:10pt;" rows="5" cols="50" readonly></textarea>
            <div style="margin-top:10px;">
                <p style="display:inline-block;">Speed</p>
                <input type="range" min="35" max="550" value="35" id="unitTime" style="width:110px; height:15px;" oninput="myDevice.MorseCode.setSpeed(this.value);">
                <p style="display:inline-block;">Use buzzer</p>
                <input type="checkbox" style="display:inline-block; height:15px;" id="useBuzzer" oninput="myDevice.MorseCode.setUseBuzzer(this.checked);">
                <p style="display:inline-block;">Start Morse Code</p>
                <input type="checkbox" style="display:inline-block; height:15px;" id="startMorseCode" oninput="myDevice.playAnimation('Morse Code',this.checked)">
            </div>
          </div>
          <div style="display: inline-block; width: 170; margin-left:10px;"> 
            <div id="colorMorseCode"></div>
            <input type="input" value="#ffffff" maxlength="7" id="MorseCodeHex" class="relative hexInput" style="left: 0; top:0;"  oninput='myDevice.MorseCode.setHexColor(this.value);'>
          </div>
        </div>
        <div id="Ambilight" class="tabcontent">
          <p class="title">Ambilight</p>
          <p>Ambilight is not avalible on web version get the windows client</p>
        </div>
        <div id="Schedule" class="tabcontent">
          <p class="title">Schedule</p>
          <p style="margin:0 0 20 20">Time schedule:</p>
          <div id="timeScheduleContainer"></div>
          <div style="display:inline-block">
            <div style="margin-bottom:20px;">
              <p style="display:inline-block; vertical-align: bottom;">Enable</p>
              <label class="switch">
                <input type="checkbox" id="enableScheduler" oninput="myDevice.TimeSchedule.enable(this.checked)">
                <span class="slider round"></span>
              </label>
            </div>
            <button class="greenBtn" onclick="if(myDevice.TimeSchedule.Schedules.length<10) createNewScheduleWindow(-1,null); else alert('10 schedules limit');">ADD NEW</button>
          </div>
        </div>
        <div id="Other" class="tabcontent" style="position: relative;">
          <button class="btn" onclick="myDevice.ConnectToggle()"><i class="fas fa-wifi fa-3x"></i><p id="disconnectButton">Connect<p></button>
          <button class="btn" onclick="myDevice.powerConnectedToggle()" style="position:relative; top:10px;"><div id="powerConnected"><div id="btn-ring" style="width: 18px;height: 18px;top: 5px;left: 5px; border: 5px solid #2a2a2a"><div id="ring-line" style="width: 5px;height: 20px; margin: -8px auto;"></div></div></div><p>Power if connected<p></button>
          <button class="btn" onclick="myDevice.restart()"><i class="fas fa-redo-alt fa-3x"></i></i><br>Restart Device</button>
          <button class="btn" onclick="window.location = '/config'"><i class="fas fa-cogs fa-3x"></i><br>Config</button>
          <button class="btn" onclick="myDevice.format()"><i class="fas fa-eraser fa-3x"></i><br>Factory reset</button>
          <button class="btn" onclick="myDevice.removeUserData()"><i class="far fa-trash-alt fa-3x"></i><br>Remove User Data</button>
          <p style="position: absolute;bottom: 8px;right: 16px;">ESPRGB Version: <i id="ESPRGB-Version" >0.0.0.0</i></p>
        </div>
      </div>
    </div>
  <script>
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global=global||self,global.ESPRGB=factory())}(this,function(){'use strict';class SolidColor{#this;#powerButton;#Color;#Hex;#Brightness;constructor(_this){this.#this=_this;this.#powerButton=!1;this.#Color=[255,255,255];this.#Hex='#ffffff';this.#Brightness=1.0}
set _Color(value){this.#Color=value;this.#Hex=this.#this.rgbToHex(this.#Color[0],this.#Color[1],this.#Color[2]);this.#this.emit(this,'Color:change',{Color:this.#Color,Hex:this.#Hex})}
get Color(){return this.#Color}
get Hex(){return this.#Hex}
set _Brightness(value){this.#Brightness=value;this.#this.emit(this,'Brightness:change',{Brightness:this.#Brightness})}
get Brightness(){return this.#Brightness}
set _powerButton(value){this.#powerButton=value;this.#this.emit(this,'powerButton:change',{powerButton:this.#powerButton})}
get powerButton(){return this.#powerButton}
setRGBColor(red,green,blue){this.#Color=[red,green,blue];this.#Hex=this.#this.rgbToHex(red,green,blue);const params=this.#this._animParam({"SolidColor":{"Color":[this.#Color[0]*4,this.#Color[1]*4,this.#Color[2]*4]}});this.#this.setAnimation("Solid Color",params)}
setHexColor(hex){if(!this.#this.isHexColor(hex))return;const color=this.#this.hexToColor(hex);this.setRGBColor(color.r,color.g,color.b);this.#this.emit(this,'Color:change',{Color:this.#Color,Hex:this.#Hex})}
setBrightness(brightness){if(brightness>1.0||brightness<0.0){console.log('Input range is between 0.0 to 1.0');return}
this.#Brightness=brightness;const params=this.#this._animParam({"SolidColor":{'Brightness':this.#Brightness}});this.#this.setAnimation("Solid Color",params)}
powerButtonToggle(){if(this.#this.CheckIfConnected())return;this.#powerButton=!this.#powerButton;if(this.powerButton)this.#this.setAnimation("Power On");else this.#this.setAnimation("Power Off")}
on(eventList,callback){this.#this.setEvent(this,eventList,callback)}}
class ColorCycle{#this;#Speed;constructor(_this){this.#this=_this;this.#Speed=0}
set _Speed(value){this.#Speed=value;this.#this.emit(this,'Speed:change',{Speed:this.#Speed})}
get Speed(){return this.#Speed}
setSpeed(value){if(this.#this.CheckIfConnected())return;this.#Speed=value;this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'ColorCycle':{'ColorCycleSpeed':this.#Speed}})))}
on(eventList,callback){this.#this.setEvent(this,eventList,callback)}}
class Breathing{#this;#ColorList;#Hex;#Speed;#useColorList;#StaticColor;constructor(_this){this.#this=_this;this.#ColorList=[];this.#useColorList=!1;this.#StaticColor=[255,255,255];this.#Hex='#ffffff';this.#Speed=0}
set _Speed(value){this.#Speed=value;this.#this.emit(this,'Speed:change',{Speed:this.#Speed})}
get Speed(){return this.#Speed}
set _useColorList(value){this.#useColorList=value;this.#this.emit(this,'useColorList:change',{useColorList:this.#useColorList})}
get useColorList(){return this.#useColorList}
get Hex(){return this.#Hex}
get StaticColor(){return this.#StaticColor}
set _StaticColor(value){this.#StaticColor=value;this.#Hex=this.#this.rgbToHex(this.#StaticColor[0],this.#StaticColor[1],this.#StaticColor[2]);this.#this.emit(this,'StaticColor:change',{StaticColor:this.#StaticColor,Hex:this.#Hex})}
get colorList(){return this.#ColorList}
set _colorList(value){this.#ColorList=value;this.#this.emit(this,'colorList:change',{colorList:this.#ColorList})}
get colorList(){return this.#ColorList}
setSpeed(value){if(this.#this.CheckIfConnected())return;this.#Speed=value;this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'Breathing':{'breathingSpeed':this.#Speed}})))}
setUseColorList(checked){if(this.#this.CheckIfConnected())return;this.#useColorList=checked;this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'Breathing':{'useColorList':this.#useColorList}})))}
setHexColor(hex){if(!this.#this.isHexColor(hex))return;const color=this.#this.hexToColor(hex);this.setRGBColor(color.r,color.g,color.b);this.#this.emit(this,'StaticColor:change',{StaticColor:this.#StaticColor,Hex:this.#Hex})}
setRGBColor(red,green,blue){if(this.#this.CheckIfConnected())return;this.#StaticColor=[red,green,blue];this.#Hex=this.#this.rgbToHex(red,green,blue);this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({"Breathing":{"staticColorBreathing":[this.#StaticColor[0]*4,this.#StaticColor[1]*4,this.#StaticColor[2]*4]}})))}
clearList(){if(this.#this.CheckIfConnected())return;this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'Breathing':{'clearColorList':!0}})))}
removeLastfromList(){if(this.#this.CheckIfConnected())return;this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'Breathing':{'removeLastfromList':!0}})))}
addColortoList(red,green,blue){if(this.#this.CheckIfConnected())return;if(this.#ColorList.length!=25)this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'Breathing':{'addColortoList':[red*4,green*4,blue*4]}})));else alert('25 colors limit')}
on(eventList,callback){this.#this.setEvent(this,eventList,callback)}}
class MorseCode{#this;#alphabet;#morse;#useBuzzer;#Speed;#Color;#Hex;#PlainText;#EncodedText;constructor(_this){this.#this=_this;this.#useBuzzer=!1;this.#Speed=0;this.#Color=[255,255,255];this.#Hex='#ffffff';this.#PlainText="";this.#EncodedText="";this.#alphabet=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","!","@","&","(",")","-","_","=","+",".",",","/","?",";",":","\"","\'"];this.#morse=[".-","-...","-.-.","-..",".","..-.","--.","....","..",".---","-.-",".-..","--","-.","---",".--.","--.-",".-.","...","-","..-","...-",".--","-..-","-.--","--..",".----","..---","...--","....-","-....","--...","---..","----.","-----","-.-.--",".--.-.",".....",".-...","-.--.","-.--.-","-....-","..--.-","-...-",".-.-.",".-.-.-","--..--","-..-.","..--..","-.-.-.","---...",".----.",".-..-."]}
get Speed(){return this.#Speed}
set _Speed(value){this.#Speed=value;this.#this.emit(this,'Speed:change',{Speed:this.#Speed})}
get useBuzzer(){return this.#useBuzzer}
set _useBuzzer(value){this.#useBuzzer=value;this.#this.emit(this,'useBuzzer:change',{useBuzzer:this.#useBuzzer})}
get EncodedText(){return this.#EncodedText}
get PlainText(){return this.#PlainText}
set _EncodedText(value){this.#EncodedText=value;this.#PlainText=this.decodeMessage(this.#EncodedText)
this.#this.emit(this,'encodedText:change',{PlainText:this.#PlainText,EncodedText:this.#EncodedText})}
set _Color(value){this.#Color=value;this.#Hex=this.#this.rgbToHex(this.#Color[0],this.#Color[1],this.#Color[2]);this.#this.emit(this,'Color:change',{Color:this.#Color,Hex:this.#Hex})}
get Color(){return this.#Color}
get Hex(){return this.#Hex}
setSpeed(value){if(this.#this.CheckIfConnected())return;this.#Speed=value;this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'MorseCode':{'unitTimeMorseCode':this.#Speed}})))}
setUseBuzzer(checked){if(this.#this.CheckIfConnected())return;this.#useBuzzer=checked;this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'MorseCode':{'useBuzzer':this.#useBuzzer}})))}
setText(text){if(this.#this.CheckIfConnected())return;this.#PlainText=text;this.#EncodedText=this.encodeMessage(this.#PlainText);this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({'MorseCode':{'encodedMorseCode':this.#EncodedText}})));return this.#EncodedText}
setHexColor(hex){if(!this.#this.isHexColor(hex))return;const color=this.#this.hexToColor(hex);this.setRGBColor(color.r,color.g,color.b);this.#this.emit(this,'Color:change',{Color:this.#Color,Hex:this.#Hex})}
setRGBColor(red,green,blue){if(this.#this.CheckIfConnected())return;this.#Color=[red,green,blue];this.#Hex=this.#this.rgbToHex(red,green,blue);this.#this.WebSocket.send(JSON.stringify(this.#this._animParam({"MorseCode":{"colorMorseCode":[this.#Color[0]*4,this.#Color[1]*4,this.#Color[2]*4]}})))}
encodeMessage(e){var encoded="";var words=e.split(/\s+/).filter(function(i){return i});for(var i=0;i<words.length;i++){var ch=words[i].split('').filter(function(i){return i});for(var j=0;j<ch.length;j++){if(this.#alphabet.indexOf(ch[j])>-1){encoded+=this.#morse[this.#alphabet.indexOf(ch[j])];if(j+1!=ch.length)encoded+="*"}}
if(i+1!=words.length)encoded+="|"}
return encoded}
decodeMessage(e){var decoded="";var encodedWords=e.split('|').filter(function(i){return i});for(var i=0;i<encodedWords.length;i++){var ch=encodedWords[i].split('*').filter(function(i){return i});for(var j=0;j<ch.length;j++)if(this.#morse.indexOf(ch[j])>-1)decoded+=this.#alphabet[this.#morse.indexOf(ch[j])];if(i+1!=encodedWords.length)decoded+=" "}
return decoded}
on(eventList,callback){this.#this.setEvent(this,eventList,callback)}}
class TimeSchedule{#this;#Enabled;#Schedules;constructor(_this){this.#this=_this;this.#Enabled=!1;this.#Schedules=[]}
get Enabled(){return this.#Enabled}
set _Enabled(value){this.#Enabled=value;this.#this.emit(this,'Enabled:change',{Enabled:this.#Enabled})}
get Schedules(){return this.#Schedules}
set _Schedules(value){this.#Schedules=value;this.#this.emit(this,'Schedules:change',{Schedules:this.#Schedules})}
enable(value){if(this.#this.CheckIfConnected())return;this.#Enabled=value;this.#this.WebSocket.send(JSON.stringify({'Animations':{'Schedules':{'enableScheduler':this.#Enabled}}}))}
Remove(timestamp){if(this.#this.CheckIfConnected())return;this.#this.WebSocket.send(JSON.stringify({'Animations':{'Schedules':{'removeTimeSchedule':{'Timestamp':timestamp}}}}))}
EnableSchedule(timestamp,value){if(this.#this.CheckIfConnected())return;this.#this.WebSocket.send(JSON.stringify({'Animations':{'Schedules':{'editTimeSchedule':{'oldTimestamp':timestamp,"newData":{"enable":value}}}}}))}
addSchedule(label,days,timestamp,animation,parameters){if(this.#this.CheckIfConnected())return;this.#this.WebSocket.send(JSON.stringify({"Animations":{"Schedules":{"newTimeSchedule":this.scheduleJson(label,days,timestamp,animation,parameters)}}}))}
editSchedule(oldtimestamp,_label,_days,_timestamp,_animation,_parameters){if(this.#this.CheckIfConnected())return;this.#this.WebSocket.send(JSON.stringify({"Animations":{"Schedules":{"editTimeSchedule":{"oldTimestamp":oldtimestamp,"newData":this.scheduleJson(_label,_days,_timestamp,_animation,_parameters)}}}}))}
scheduleJson(label,days,timestamp,animation,parameters){return{"Label":label,"Days":days,"Timestamp":timestamp,"playingAnimation":animation,"parameters":parameters,"enable":!0}}
on(eventList,callback){this.#this.setEvent(this,eventList,callback)}}
class ESPRGB{#RSSIInterval;#events;#deferredEvents;#activeEvents;#powerConnected;#playingAnimation;#RSSI;#Version;constructor(ipaddress,port=81){this.ipaddress=ipaddress;this.port=port;this.#powerConnected=!1;this.#playingAnimation="";this.#RSSI=0;this.#Version='';this.SolidColor=new SolidColor(this);this.ColorCycle=new ColorCycle(this);this.Breathing=new Breathing(this);this.MorseCode=new MorseCode(this);this.TimeSchedule=new TimeSchedule(this);this.#RSSIInterval;this.#events={};this.#deferredEvents={};this.#activeEvents={}}
get powerConnected(){return this.#powerConnected}
set powerConnected(value){this.#powerConnected=value;this.emit(this,'powerConnected:change',{powerConnected:this.#powerConnected})}
get playingAnimation(){return this.#playingAnimation}
set playingAnimation(value){this.#playingAnimation=value;this.emit(this,'playingAnimation:change',{playingAnimation:this.#playingAnimation})}
get RSSI(){return this.#RSSI}
set RSSI(value){this.#RSSI=value;this.emit(this,'RSSI:change',{RSSI:this.#RSSI})}
get Version(){return this.#Version}
set Version(value){this.#Version=value;this.emit(this,'Version:change',{Version:this.#Version})}
CheckIfConnected(dontprintWarning=!1){if(this.WebSocket==null||this.WebSocket==='undefined'||this.WebSocket.readyState===WebSocket.CLOSED){if(!dontprintWarning)console.log('WebSocket connection is not available.');return!0}
return!1}
ConnectToggle(){if(!this.CheckIfConnected(!0)){this.Disconnect();return!1}
this.Connect();return!0}
Connect(){this.WebSocket=new WebSocket(`ws://${this.ipaddress}:${this.port}/`);this.WebSocket.onopen=(e)=>{console.log("Connected");this.playingAnimation="Connected";this.emit(this,'connected:change',{connected:!0});this.Version=this.getVersion();this.#RSSIInterval=setInterval(()=>this.RSSI=this.getSignalStrength(),10000)}
this.WebSocket.onmessage=(event)=>{var data=JSON.parse(event.data);if("Animations" in data){var anim=data.Animations;if("parameters" in anim){var params=anim.parameters;if("SolidColor" in params){if("Color" in params.SolidColor)this.SolidColor._Color=[params.SolidColor.Color[0]/4,params.SolidColor.Color[1]/4,params.SolidColor.Color[2]/4];if("Brightness" in params.SolidColor)this.SolidColor._Brightness=params.SolidColor.Brightness}
if("ColorCycle" in params){if("ColorCycleSpeed" in params.ColorCycle)this.ColorCycle._Speed=params.ColorCycle.ColorCycleSpeed}
if("Breathing" in params){if("breathingSpeed" in params.Breathing)this.Breathing._Speed=params.Breathing.breathingSpeed;if("colorListBreathing" in params.Breathing){const colors=[];params.Breathing.colorListBreathing.forEach(item=>colors.push([item[0]/4,item[1]/4,item[2]/4]))
this.Breathing._colorList=colors}
if("staticColorBreathing" in params.Breathing)
this.Breathing._StaticColor=[params.Breathing.staticColorBreathing[0]/4,params.Breathing.staticColorBreathing[1]/4,params.Breathing.staticColorBreathing[2]/4];if("useColorList" in params.Breathing)this.Breathing._useColorList=params.Breathing.useColorList}
if("MorseCode" in params){if("encodedMorseCode" in params.MorseCode)this.MorseCode._EncodedText=params.MorseCode.encodedMorseCode;if("unitTimeMorseCode" in params.MorseCode)this.MorseCode._Speed=params.MorseCode.unitTimeMorseCode;if("useBuzzer" in params.MorseCode)this.MorseCode._useBuzzer=params.MorseCode.useBuzzer;if("colorMorseCode" in params.MorseCode)
this.MorseCode._Color=[params.MorseCode.colorMorseCode[0]/4,params.MorseCode.colorMorseCode[1]/4,params.MorseCode.colorMorseCode[2]/4]}}
if("Schedules" in anim){if("enableScheduler" in anim.Schedules)this.TimeSchedule._Enabled=anim.Schedules.enableScheduler;if("timeSchedule" in anim.Schedules)this.TimeSchedule._Schedules=anim.Schedules.timeSchedule}
if("PowerState" in anim)this.SolidColor._powerButton=anim.PowerState;if("playingAnimation" in anim)this.playingAnimation=anim.playingAnimation;if("powerConnected" in anim)this.powerConnected=anim.powerConnected}}
this.WebSocket.onclose=(e)=>{console.log("Disconnected");this.playingAnimation="Disconnected";this.emit(this,'connected:change',{connected:!1})}
this.WebSocket.onerror=(e)=>{console.log("Disconnected");this.playingAnimation="Disconnected";this.emit(this,'connected:change',{connected:!1})}}
Disconnect(){if(this.CheckIfConnected())return;this.WebSocket.close();clearInterval(this.#RSSIInterval)}
_animParam(param){return{"Animations":{"parameters":param}}}
merge(obj1,obj2){for(var p in obj2){try{if(obj2[p].constructor==Object)obj1[p]=this.merge(obj1[p],obj2[p]);else obj1[p]=obj2[p]}catch(e){obj1[p]=obj2[p]}}
return obj1}
hexToColor(hex){if(hex[0]=='#')hex=hex.substring(1);var bigint=parseInt(hex,16);return{r:(bigint>>16)&255,g:(bigint>>8)&255,b:bigint&255}}
playAnimation(animation,status=!0){if(status==!1){this.setAnimation('Solid Color');return}
this.setAnimation(animation)}
setAnimation(animation,parameters=null){if(this.CheckIfConnected())return;var anim={"Animations":{"playingAnimation":animation}};if(parameters!=null)anim=this.merge(anim,parameters);this.WebSocket.send(JSON.stringify(anim))}
powerConnectedToggle(){if(this.CheckIfConnected())return;this.powerConnected=!this.powerConnected;this.WebSocket.send(JSON.stringify({"Animations":{'powerConnected':this.powerConnected}}))}
getSignalStrength(){const xhr=new XMLHttpRequest();xhr.open("GET",`http://${this.ipaddress}/getSignalStrenght`,!1);xhr.send();if(xhr.status===200){const data=JSON.parse(xhr.responseText);if("RSSI" in data)return data.RSSI}
return"-70"}
restart(){if(confirm('Are you sure you want to restart this device?')){this.Disconnect();const xhr=new XMLHttpRequest();xhr.open('GET',`http://${this.ipaddress}/restartESP`,!0);xhr.send()}}
format(){if(confirm('Are you sure you want to format this device?')){this.Disconnect();const xhr=new XMLHttpRequest();xhr.open('GET',`http://${this.ipaddress}/formatDevice`,!0);xhr.send()}}
removeUserData(){if(confirm('Are you sure you want to remove all the user data from this device?')){this.Disconnect();const xhr=new XMLHttpRequest();xhr.open('GET',`http://${this.ipaddress}/removeUserData`,!0);xhr.send()}}
getVersion(){const xhr=new XMLHttpRequest();xhr.open("GET",`http://${this.ipaddress}/getVersion`,!1);xhr.send();if(xhr.status===200){const data=JSON.parse(xhr.responseText);if("ESPRGB_VERSION" in data)return data.ESPRGB_VERSION}
return"0.0.0.0"}
emit(sender,eventType,...args){eventType=`${sender.__proto__.constructor.name}_${eventType}`;const activeEvents=this.#activeEvents;const isEventActive=activeEvents.hasOwnProperty(eventType)?activeEvents[eventType]:!1;if(!isEventActive){activeEvents[eventType]=!0;const callbackList=this.#events[eventType]||[];callbackList.forEach(fn=>fn.apply(this,args));activeEvents[eventType]=!1}}
setEvent(sender,eventList,callback){eventList=`${sender.__proto__.constructor.name}_${eventList}`;const events=this.#events;(!Array.isArray(eventList)?[eventList]:eventList).forEach(eventType=>{(events[eventType]||(events[eventType]=[])).push(callback);if(this.#deferredEvents[eventType]){this.#deferredEvents[eventType].forEach(args=>{callback.apply(null,args)});this.#deferredEvents[eventType]=[]}})}
isHexColor(hex){return typeof hex==='string'&&hex.charAt(0)==='#'&&hex.length===7&&!isNaN(Number('0x'+hex.substring(1)))}
rgbToHex(r,g,b){return"#"+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1)}
on(eventList,callback){this.setEvent(this,eventList,callback)}}
return ESPRGB}))
  </script>
  <script >
document.getElementById("hostname").innerText=window.location.hostname;var myDevice=new ESPRGB(window.location.hostname);myDevice.SolidColor.on("Color:change",e=>{solidColor.color.rgb={r:e.Color[0],g:e.Color[1],b:e.Color[2]},setBrightnessColor(document.getElementById("brightness").value/100)}),myDevice.SolidColor.on("powerButton:change",e=>{e.powerButton?document.getElementById("btn-bg").classList.add("active"):document.getElementById("btn-bg").classList.remove("active")}),myDevice.SolidColor.on("Brightness:change",e=>{setBrightnessColor(e.Brightness),document.getElementById("brightness").value=100*e.Brightness}),myDevice.ColorCycle.on("Speed:change",e=>{document.getElementById("ColorCycleSpeed_input").value=e.Speed,document.getElementById("ColorCycleSpeed").innerHTML=e.Speed}),myDevice.Breathing.on("Speed:change",e=>{document.getElementById("breathingSpeed_input").value=e.Speed,document.getElementById("breathingSpeed").innerHTML=e.Speed}),myDevice.Breathing.on("useColorList:change",e=>document.getElementById("useColorList").checked=e.useColorList),myDevice.Breathing.on("StaticColor:change",e=>{staticColorBreathing.color.rgb={r:e.StaticColor[0],g:e.StaticColor[1],b:e.StaticColor[2]},document.getElementById("BreathingHex").value=e.Hex}),myDevice.Breathing.on("colorList:change",e=>redrawColorList("colorListResult",e.colorList)),myDevice.MorseCode.on("Color:change",e=>{colorMorseCode.color.rgb={r:e.Color[0],g:e.Color[1],b:e.Color[2]},document.getElementById("MorseCodeHex").value=e.Hex}),myDevice.MorseCode.on("Speed:change",e=>document.getElementById("unitTime").value=e.Speed),myDevice.MorseCode.on("useBuzzer:change",e=>document.getElementById("useBuzzer").checked=e.useBuzzer),myDevice.MorseCode.on("encodedText:change",e=>{document.getElementById("morsePlainText").value=e.PlainText,document.getElementById("encodedMsgResult").value=e.EncodedText}),myDevice.TimeSchedule.on("Enabled:change",e=>document.getElementById("enableScheduler").checked=e.Enabled),myDevice.TimeSchedule.on("Schedules:change",e=>createAllTimeItems(e.Schedules)),myDevice.on("playingAnimation:change",e=>{document.getElementById("startBreathing").checked=!1,document.getElementById("startColorCycle").checked=!1,document.getElementById("startMorseCode").checked=!1,"Breathing"==e.playingAnimation&&(document.getElementById("startBreathing").checked=!0),"Color Cycle"==e.playingAnimation&&(document.getElementById("startColorCycle").checked=!0),"Morse Code"==e.playingAnimation&&(document.getElementById("startMorseCode").checked=!0),document.getElementById("playingAnimation").innerText=e.playingAnimation}),myDevice.on("powerConnected:change",e=>{e.powerConnected?document.getElementById("powerConnected").classList.add("active"):document.getElementById("powerConnected").classList.remove("active")}),myDevice.on("Version:change",e=>document.getElementById("ESPRGB-Version").innerText=e.Version),myDevice.on("RSSI:change",e=>{e.RSSI>=-50?document.getElementById("signalStrenght").innerText="Excellent":e.RSSI<-50&&e.RSSI>=-60?document.getElementById("signalStrenght").innerText="Good":e.RSSI<-60&&e.RSSI>=-70?document.getElementById("signalStrenght").innerText="Fair":e.RSSI<-70&&(document.getElementById("signalStrenght").innerText="Weak")}),myDevice.on("connected:change",e=>{e.connected?document.getElementById("disconnectButton").innerText="Disconnect":document.getElementById("disconnectButton").innerText="Connect"});var solidColor=new iro.ColorPicker("#solidColor",{width:300,layout:[{component:iro.ui.Wheel,options:{wheelAngle:0,wheelDirection:"clockwise"}}]});solidColor.on("input:change",e=>{myDevice.SolidColor.setRGBColor(e.rgb.r,e.rgb.g,e.rgb.b),setBrightnessColor(document.getElementById("brightness").value/100),document.getElementById("SolidColorHex").value=myDevice.SolidColor.Hex});var staticColorBreathing=new iro.ColorPicker("#staticColorBreathing",{width:270,layout:[{component:iro.ui.Wheel,options:{wheelAngle:0,wheelDirection:"clockwise"}}]});staticColorBreathing.on("input:change",e=>{myDevice.Breathing.setRGBColor(e.rgb.r,e.rgb.g,e.rgb.b),document.getElementById("BreathingHex").value=myDevice.Breathing.Hex});var colorMorseCode=new iro.ColorPicker("#colorMorseCode",{width:170,layout:[{component:iro.ui.Wheel,options:{wheelAngle:0,wheelDirection:"clockwise"}}]});colorMorseCode.on("input:change",e=>{myDevice.MorseCode.setRGBColor(e.rgb.r,e.rgb.g,e.rgb.b),document.getElementById("MorseCodeHex").value=myDevice.MorseCode.Hex});var bar=document.querySelector('[data="inputstyle"]');function setBrightnessColor(e){const t=[];myDevice.SolidColor.Color.forEach(o=>t.push(o*e)),bar.innerHTML=`#brightness::-webkit-slider-thumb {box-shadow: -100vw 0 0 100vw rgb(${t})}`}function redrawColorList(e,t){const o=document.getElementById(e);if(o.innerHTML="",t.length>0)t.forEach((e,t)=>{var n=document.createElement("div");n.style.cssText=`background-color:rgb(${e[0]},${e[1]},${e[2]}); display: table-cell; border:1px solid #2e2e36`,o.appendChild(n)});else{var n=document.createElement("div");n.style.cssText="background-color:#152036; display: table-cell;",document.getElementById(e).appendChild(n)}}function createAllTimeItems(e){document.getElementById("timeScheduleContainer").innerHTML="",e.forEach((e,t)=>createTimeSchedule(e.Label,e.playingAnimation,e.Days,e.Timestamp,e.enable,t))}function createTimeSchedule(e,t,o,n,l,i){for(var d=new Date(1e3*n),c=document.getElementById("timeScheduleContainer"),r=`\n    <div id="itemContainer" style="width:90%; height:50px; background-color:#1b2a47; margin:20 auto; " value="3">\n      <button style="width:17px; height:100%; background-color:#f44336; border:none; display:inline-block; color:white; vertical-align: top;" onClick="myDevice.TimeSchedule.Remove(${n})" value="${i}">X</button>\n      <button style="width:17px; height:100%; background-color:#626262; border:none; display:inline-block; color:white; vertical-align: top;" onClick="createNewScheduleWindow(${i},myDevice.TimeSchedule.Schedules[${i}])"><i class="fas fa-cog"></i></button>\n      <p style="width:70px; height:100%; line-height: 50px; text-align: center; display:inline-block; color:white; font-size: 14pt; vertical-align: top;"> ${("0"+d.getHours()).slice(-2)}:${("0"+d.getMinutes()).slice(-2)} </p>\n      <div style="display:inline-block; width:120px; vertical-align: top; ">\n          <p style="font-size: 10pt; margin:5 0 0 5; display:block;"> ${e}</p>\n          <p style="font-size: 10pt; margin:5 0 0 5; display:block;">${t}</p>\n      </div>\n      <div style="display:inline-block; vertical-align: top; margin-right:10px; width:120px; height:100%;">`,s=["Su","Mo","Tu","We","Th","Fr","Sa"],a=0;a<7;a++)o[a]?r+=`<label style="font-size:8pt; line-height: 48px; margin-right:4px; color:#06d79c">${s[a]}</label>`:r+=`<label style="font-size:8pt; line-height: 48px; margin-right:4px; color:white">${s[a]}</label>`;r+='</div><label class="switch" style="margin-top:14px;">',r+=l?`<input type="checkbox" id="enableTimeSchedule" oninput="myDevice.TimeSchedule.EnableSchedule(${n},this.checked)" checked />`:`<input type="checkbox" id="enableTimeSchedule" oninput="myDevice.TimeSchedule.EnableSchedule(${n},this.checked)" />`,r+='<span class="slider round"></span></label></div>',c.innerHTML+=r}var schedule_solidColor,schedule_staticColorBreathing,schedule_colorMorseCode,scheduleWindowOpened=!1,sch_colorList=[];function createNewScheduleWindow(e,t){if(!scheduleWindowOpened){var o=`<div style="width:700px; height:650px;  background-color:#1b2a47; border: 10px solid #152036; position:absolute; top: 50%;left: 50%;transform: translate(-50%, -50%); color:white;" id="addNewSchedule">\n            <input type="number" style="visibility:hidden" id="selectedPage" value="0">\n            <div style="width:450px; height:300px; background-color:#152036; margin:100 auto; padding:10px;" id="timePanel">\n              <p style="font-size:11pt;">Time schedule</p>\n              <table style="margin:80 auto;color:white;"><tr><td>Label</td><td>Hour</td><td>Minute</td></tr><tr>\n                  <td><input id="LabelText"style="width:160px;height:25;" maxlength="16" value="Schedule"/></td>\n                  <td><input id="hourTextBox" style="width:50px;height:25;" type="number" min="0" max="23" value="${("0"+(n=new Date).getHours()).slice(-2)}"/></td>\n                  <td><input id="minuteTextBox" style="width:50px;height:25;" type="number" min="0" max="59" value="${("0"+n.getMinutes()).slice(-2)}"/></td></tr><tr><td>\n                    <p style="display:inline-block; margin-right:5px; font-size:8pt;">Mo</p>\n                    <p style="display:inline-block; margin-right:5px; font-size:8pt;">Tu</p>\n                    <p style="display:inline-block; margin-right:5px; font-size:8pt;">We</p>\n                    <p style="display:inline-block; margin-right:5px; font-size:8pt;">Th</p>\n                    <p style="display:inline-block; margin-right:5px; font-size:8pt;">Fr</p>\n                    <p style="display:inline-block; margin-right:5px; font-size:8pt;">Sa</p>\n                    </td></tr><tr><td>\n                    <input id="SuCheckbox" type="checkbox" style="display:inline-block; margin-right:5px; width:15px; height15px;" checked/>\n                    <input id="MoCheckbox" type="checkbox" style="display:inline-block; margin-right:5px; width:15px; height15px;" checked/>\n                    <input id="TuCheckbox" type="checkbox" style="display:inline-block; margin-right:3px; width:15px; height15px;" checked/>\n                    <input id="WeCheckbox" type="checkbox" style="display:inline-block; margin-right:3px; width:15px; height15px;" checked/>\n                    <input id="ThCheckbox" type="checkbox" style="display:inline-block; margin-right:3px; width:15px; height15px;" checked/>\n                    <input id="FrCheckbox" type="checkbox" style="display:inline-block; margin-right:3px; width:15px; height15px;" checked/>\n                    <input id="SaCheckbox" type="checkbox" style="display:inline-block; margin-right:3px; width:15px; height15px;" checked/>\n                    </td></tr></table></div>\n            <div style="width:350px; height:350px; margin:50 auto; display:none;" id="timeAnim">\n            <select size="5" style="width:350px; height:350px; font-size:13pt;background-color:#152036;border:none;overflow:hidden;color:white;" id="timeAnimList"><option value="Power Off" selected="selected">Power Off</option><option value="Power On">Power On</option><option value="Solid Color">Solid Color</option><option value="Color Cycle">Color Cycle</option><option value="Breathing">Breathing</option><option value="Morse Code">Morse Code</option></select></div>\n            <div id="scheduleSolidColor" style="width:500px; height:450px; background-color:#152036; margin:50 auto; padding:10px; display:none">\n              <p class="title">Solid Color</p>\n              <div style=" width: 300px; margin:20 auto; height: 400px;">\n                <div id="schedule_solidColor" style="-webkit-box-align:center;-webkit-box-pack:center;display:-webkit-box;"></div>\n                <div class="relative" style='height:52px;'></div>\n                <input id="schedule_SolidColorHex" type="input" value="#ffffff" maxlength="7"  class="relative hexInput"/>\n                <div style="height: 80px; position: relative; top:-45px;"> <input  type="range" min="0" max="100" value="100" style="width:300px" id="schedule_brightness"/></div>    </div></div>\n            <div id="scheduleColorCycle" style="width:500px; height:350px; background-color:#152036; margin:50 auto; padding:10px; display:none">\n              <p>Color Cycle</p>\n              <div style="margin-top: 20px;text-align:center;font-size:12px">\n                <input  type="range" min="1" max="200" value="1" id="schedule_ColorCycleSpeed" oninput="document.getElementById('schedule_ColorCycleSpeed_text').innerText = this.value;">\n                <p>Speed:<i id="schedule_ColorCycleSpeed_text">1</i></p></div></div>\n            <div id="scheduleBreathing" style="width:500px; height:450px; background-color:#152036; margin:50 auto; padding:10px; display:none">\n              <p class="title">Breathing</p>\n              <div style="margin: 20px auto;font-size:12px; width: 400;">\n                <div style="margin: 0 auto; width: 380; text-align: center;"> <input type="range" min="1" max="200" value="1" id="schedule_breathingSpeed" oninput="document.getElementById('schedule_breathingSpeed_text').innerText = this.value;"></div>\n                <div style="height: 25px;width: 378px; margin:4px auto;">\n                  <input type="checkbox" style="float:right; margin: 0px 4px;" id="schedule_useColorList">\n                  <p style="float:right; margin: 0px 4px;">Use Color List</p>\n                  <p style="float:right; margin: 0px 4px;">Speed:<i id="schedule_breathingSpeed_text">1</i></p></div>\n                  <div id="schedule_colorListResult" style="height: 25px;width: 370px; margin:4px auto; display: table; table-layout: fixed;"><div style="background-color:#152036; display: table-cell;"></div></div>\n                  <div style="height: 25px;width: 370px; margin:0 auto; display:inline-block;">\n                    <button class="btn" style="width:25px; height:25px; float:right; margin:0px 5px; background-color:#3498db;" onclick="sch_br_clearColorlist()">C</button>\n                    <button class="btn" style="width:25px; height:25px; float:right; margin:0px 5px; background-color:#c0392b;" onclick="sch_br_removeLastColor()">-</button>\n                    <button class="btn" style="width:25px; height:25px; float:right; margin:0px 5px; background-color:#06d79c;" onclick="sch_br_addCurrentColor()">+</button></div>\n                  <div id="schedule_staticColorBreathing" style="-webkit-box-align:center;-webkit-box-pack:center;display:-webkit-box; margin:10;"></div>\n                  <input type="input" value="#ffffff" maxlength="7" id="schedule_BreathingHex" class="relative hexInput" style="left: 45; top:-30;">  </div></div>\n            <div id="scheduleMorseCode" style="width:580px; height:450px; background-color:#152036; margin:50 auto; padding:10px; display:none">\n                  <p class="title">Morse Code</p>\n                  <div style="display:inline-block;">\n                    <p style="margin:10px 0px 5px 0px;">Plain message:</p>\n                    <textarea id="schedule_morsePlainText" style="resize:none; background-color: #152036; color:white; border: 1px solid #5e5e5e;text-transform: lowercase; font-size:10pt;" rows="5" cols="50" maxlength="75" oninput="document.getElementById('schedule_encodedMsgResult').value = myDevice.MorseCode. encodeMessage(this.value);"></textarea>\n                    <p style="margin:10px 0px 5px 0px;">Encoded message:</p>\n                    <textarea id="schedule_encodedMsgResult" style="resize:none; background-color: #152036; color:white; border: 1px solid #5e5e5e; font-size:10pt;" rows="5" cols="50" readonly></textarea>\n                    <div style="margin-top:10px;">\n                      <p style="display:inline-block;">Speed</p>\n                      <input type="range" min="35" max="550" value="35" id="schedule_unitTime" style="width:110px; height:15px;">\n                      <p style="display:inline-block;">Use buzzer</p>\n                      <input type="checkbox" style="display:inline-block; height:15px;" id="schedule_useBuzzer"></div></div>\n                  <div style="display: inline-block; width: 170; margin-left:10px;"> <div id="schedule_colorMorseCode"></div>\n                  <input type="input" value="#ffffff" maxlength="7" id="schedule_MorseCodeHex" class="relative hexInput" style="left: 0; top:0;"></div></div>\n            <div id="noParameters" style="width:500px; height:350px; background-color:#152036; margin:50 auto; padding:10px; display:none"><p style="text-align:center;">No parameters for this animation</p></div>\n            <div style="width: 280px; height: 45px; position:absolute; bottom:10; left:210; ">\n              <button class="greenBtn" style="height:35px;" onClick="document.getElementById('addNewSchedule').remove(); scheduleWindowOpened=false;">Cancel</button>\n              <button class="greenBtn" style="height:35px;" onClick="selectSchedulePage(-1);" disabled id="scheduleBackButton">Back</button>\n              <button class="greenBtn" style="height:35px;" onClick="selectSchedulePage(1);" id="scheduleNextButton">Next</button>\n              <button class="greenBtn" style="height:35px; display:none" onClick="finishSchedule(${e}); document.getElementById('addNewSchedule').remove(); scheduleWindowOpened=false;" id="scheduleFinishButton">Finish</button><div></div>`;let t=document.createRange().createContextualFragment(o);document.body.appendChild(t),dragElement(document.getElementById("addNewSchedule")),schedule_solidColor=new iro.ColorPicker("#schedule_solidColor",{width:300,layout:[{component:iro.ui.Wheel,options:{wheelAngle:0,wheelDirection:"clockwise"}}]}),schedule_staticColorBreathing=new iro.ColorPicker("#schedule_staticColorBreathing",{width:270,layout:[{component:iro.ui.Wheel,options:{wheelAngle:0,wheelDirection:"clockwise"}}]}),(schedule_colorMorseCode=new iro.ColorPicker("#schedule_colorMorseCode",{width:170,layout:[{component:iro.ui.Wheel,options:{wheelAngle:0,wheelDirection:"clockwise"}}]})).on("input:change",e=>document.getElementById("schedule_MorseCodeHex").value=e.hexString),schedule_staticColorBreathing.on("input:change",e=>document.getElementById("schedule_BreathingHex").value=e.hexString),schedule_solidColor.on("input:change",e=>{bar.innerHTML="#schedule_brightness::-webkit-slider-thumb {box-shadow: -100vw 0 0 100vw "+e.hexString+"}",document.getElementById("schedule_SolidColorHex").value=e.hexString}),document.getElementById("schedule_MorseCodeHex").oninput=(e=>{myDevice.isHexColor(e.target.value)&&(schedule_colorMorseCode.color.hexString=e.target.value)}),document.getElementById("schedule_BreathingHex").oninput=(e=>{myDevice.isHexColor(e.target.value)&&(schedule_staticColorBreathing.color.hexString=e.target.value)}),document.getElementById("schedule_SolidColorHex").oninput=(e=>{myDevice.isHexColor(e.target.value)&&(schedule_solidColor.color.hexString=e.target.value)}),scheduleWindowOpened=!0}if(null!=t){if("Label"in t&&(document.getElementById("LabelText").value=t.Label),"playingAnimation"in t&&(document.getElementById("timeAnimList").value=t.playingAnimation),"Days"in t&&(document.getElementById("SuCheckbox").checked=t.Days[0],document.getElementById("MoCheckbox").checked=t.Days[1],document.getElementById("TuCheckbox").checked=t.Days[2],document.getElementById("WeCheckbox").checked=t.Days[3],document.getElementById("ThCheckbox").checked=t.Days[4],document.getElementById("FrCheckbox").checked=t.Days[5],document.getElementById("SaCheckbox").checked=t.Days[6]),"Timestamp"in t){var n=new Date(1e3*t.Timestamp);document.getElementById("hourTextBox").value=("0"+n.getHours()).slice(-2),document.getElementById("minuteTextBox").value=("0"+n.getMinutes()).slice(-2)}if("parameters"in t){var l=t.parameters;if("SolidColor"in l&&("Color"in l.SolidColor&&(schedule_solidColor.color.rgb={r:l.SolidColor.Color[0]/4,g:l.SolidColor.Color[1]/4,b:l.SolidColor.Color[2]/4},document.getElementById("schedule_SolidColorHex").value=myDevice.rgbToHex(l.SolidColor.Color[0]/4,l.SolidColor.Color[1]/4,l.SolidColor.Color[2]/4)),"Brightness"in l.SolidColor)){var i=[schedule_solidColor.color.rgb.r*l.SolidColor.Brightness,schedule_solidColor.color.rgb.g*l.SolidColor.Brightness,schedule_solidColor.color.rgb.b*l.SolidColor.Brightness];bar.innerHTML=`#schedule_brightness::-webkit-slider-thumb {box-shadow: -100vw 0 0 100vw rgb(${i})}`,document.getElementById("schedule_brightness").value=100*l.SolidColor.Brightness}"ColorCycle"in l&&"ColorCycleSpeed"in l.ColorCycle&&(document.getElementById("schedule_ColorCycleSpeed").value=l.ColorCycle.ColorCycleSpeed,document.getElementById("schedule_ColorCycleSpeed_text").innerText=l.ColorCycle.ColorCycleSpeed),"Breathing"in l&&("breathingSpeed"in l.Breathing&&(document.getElementById("schedule_breathingSpeed").value=l.Breathing.breathingSpeed,document.getElementById("schedule_breathingSpeed_text").innerText=l.Breathing.breathingSpeed),"colorListBreathing"in l.Breathing&&redrawColorList("schedule_colorListResult",sch_colorList=l.Breathing.colorListBreathing),"staticColorBreathing"in l.Breathing&&(schedule_staticColorBreathing.color.rgb={r:l.Breathing.staticColorBreathing[0]/4,g:l.Breathing.staticColorBreathing[1]/4,b:l.Breathing.staticColorBreathing[2]/4},document.getElementById("schedule_BreathingHex").value=myDevice.rgbToHex(l.Breathing.staticColorBreathing[0]/4,l.Breathing.staticColorBreathing[1]/4,l.Breathing.staticColorBreathing[2]/4)),"useColorList"in l.Breathing&&(document.getElementById("schedule_useColorList").checked=l.Breathing.useColorList)),"MorseCode"in l&&("encodedMorseCode"in l.MorseCode&&(document.getElementById("schedule_morsePlainText").value=myDevice.MorseCode.decodeMessage(l.MorseCode.encodedMorseCode),document.getElementById("schedule_encodedMsgResult").value=l.MorseCode.encodedMorseCode),"unitTimeMorseCode"in l.MorseCode&&(document.getElementById("schedule_unitTime").value=l.MorseCode.unitTimeMorseCode),"colorMorseCode"in l.MorseCode&&(schedule_colorMorseCode.color.rgb={r:l.MorseCode.colorMorseCode[0]/4,g:l.MorseCode.colorMorseCode[1]/4,b:l.MorseCode.colorMorseCode[2]/4},document.getElementById("schedule_MorseCodeHex").value=myDevice.rgbToHex(l.MorseCode.colorMorseCode[0]/4,l.MorseCode.colorMorseCode[1]/4,l.MorseCode.colorMorseCode[2]/4)),"useBuzzer"in l.MorseCode&&(document.getElementById("schedule_useBuzzer").checked=l.MorseCode.useBuzzer))}}}function selectSchedulePage(e){var t=document.getElementById("selectedPage").value;switch(t=parseInt(t)+parseInt(e),document.getElementById("selectedPage").value=t,document.getElementById("scheduleBackButton").disabled=!1,document.getElementById("timePanel").style.display="none",document.getElementById("timeAnim").style.display="none",document.getElementById("scheduleNextButton").style.display="inline-block",document.getElementById("scheduleFinishButton").style.display="none",document.getElementById("noParameters").style.display="none",document.getElementById("scheduleSolidColor").style.display="none",document.getElementById("scheduleColorCycle").style.display="none",document.getElementById("scheduleBreathing").style.display="none",document.getElementById("scheduleMorseCode").style.display="none",t){case 0:document.getElementById("scheduleBackButton").disabled=!0,document.getElementById("timePanel").style.display="block";break;case 1:document.getElementById("timeAnim").style.display="block";break;case 2:document.getElementById("scheduleNextButton").style.display="none",document.getElementById("scheduleFinishButton").style.display="inline-block";var o=document.getElementById("timeAnimList").value;if("Solid Color"==o){document.getElementById("scheduleSolidColor").style.display="block";break}if("Color Cycle"==o){document.getElementById("scheduleColorCycle").style.display="block";break}if("Breathing"==o){document.getElementById("scheduleBreathing").style.display="block";break}if("Morse Code"==o){document.getElementById("scheduleMorseCode").style.display="block";break}document.getElementById("noParameters").style.display="block"}}function finishSchedule(e){var t=new Date,o=new Date(t.getFullYear(),t.getMonth(),t.getDate(),document.getElementById("hourTextBox").value,document.getElementById("minuteTextBox").value,0),n={};"Solid Color"==document.getElementById("timeAnimList").value?n.SolidColor={Color:[4*schedule_solidColor.color.rgb.r,4*schedule_solidColor.color.rgb.g,4*schedule_solidColor.color.rgb.b],Brightness:document.getElementById("schedule_brightness").value/100}:"Color Cycle"==document.getElementById("timeAnimList").value?n.ColorCycle={ColorCycleSpeed:parseInt(document.getElementById("schedule_ColorCycleSpeed").value)}:"Breathing"==document.getElementById("timeAnimList").value?n.Breathing={breathingSpeed:parseInt(document.getElementById("schedule_breathingSpeed").value),staticColorBreathing:[4*schedule_staticColorBreathing.color.rgb.r,4*schedule_staticColorBreathing.color.rgb.g,4*schedule_staticColorBreathing.color.rgb.b],colorListBreathing:sch_colorList,useColorList:document.getElementById("schedule_useColorList").checked}:"Morse Code"==document.getElementById("timeAnimList").value&&(n.MorseCode={colorMorseCode:[4*schedule_colorMorseCode.color.rgb.r,4*schedule_colorMorseCode.color.rgb.g,4*schedule_colorMorseCode.color.rgb.b],encodedMorseCode:document.getElementById("schedule_encodedMsgResult").value,unitTimeMorseCode:parseInt(document.getElementById("schedule_unitTime").value),useBuzzer:document.getElementById("schedule_useBuzzer").checked});const l=document.getElementById("LabelText").value,i=o.getTime()/1e3,d=[document.getElementById("SuCheckbox").checked,document.getElementById("MoCheckbox").checked,document.getElementById("TuCheckbox").checked,document.getElementById("WeCheckbox").checked,document.getElementById("ThCheckbox").checked,document.getElementById("FrCheckbox").checked,document.getElementById("SaCheckbox").checked],c=document.getElementById("timeAnimList").value;-1==e?myDevice.TimeSchedule.addSchedule(l,d,i,c,n):myDevice.TimeSchedule.editSchedule(myDevice.TimeSchedule.Schedules[e].Timestamp,l,d,i,c,n)}function sch_br_addCurrentColor(){25!=sch_colorList.length?(sch_colorList.push([4*schedule_staticColorBreathing.color.rgb.r,4*schedule_staticColorBreathing.color.rgb.g,4*schedule_staticColorBreathing.color.rgb.b]),redrawColorList("schedule_colorListResult",sch_colorList)):alert("25 colors limit")}function sch_br_removeLastColor(){0!=sch_colorList.length&&(sch_colorList.splice(-1,1),redrawColorList("schedule_colorListResult",sch_colorList))}function sch_br_clearColorlist(){redrawColorList("schedule_colorListResult",sch_colorList=[])}function dragElement(e){var t=0,o=0,n=0,l=0;function i(i){(i=i||window.event).preventDefault(),t=n-i.clientX,o=l-i.clientY,n=i.clientX,l=i.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-t+"px"}function d(){document.onmouseup=null,document.onmousemove=null}e.onmousedown=function(t){(t=t||window.event).srcElement.id==e.id&&(n=t.clientX,l=t.clientY,document.onmouseup=d,document.onmousemove=i)}}function selectTab(e,t){var o,n,l;for(n=document.getElementsByClassName("tabcontent"),o=0;o<n.length;o++)n[o].style.display="none";for(l=document.getElementsByClassName("tablinks"),o=0;o<l.length;o++)l[o].className=l[o].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}document.getElementById("defaultOpen").click(),myDevice.Connect();
  </script>
</body>
</html>